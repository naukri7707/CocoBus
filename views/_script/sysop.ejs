<% if(userdata && userdata.level === 100) { %>
<script>
  const $serial = $('#serial');
  const $img = $('#img');
  const $from = $('#from');
  const $to = $('#to');
  const $through = $('#through');
  const $startTime = $('#startTime');
  const $endTime = $('#endTime');
  const $interval = $('#interval');

  function remove(serial) {
    $.post(
      "/ticket/remove",
      {
        serial: serial
      },
      (res) => {
        if (res.code <= 0) {
          alert(res.msg);
          if (res.code === 0) {
            window.location.reload();
          }
        } else {
          alert("奇怪的錯誤，請聯繫管理員\n" + res.msg + "\nError Code:" + res.code);
        }
      }
    );
  }
  function add() {
    $.post(
      "/ticket/add",
      {
        serial: $serial.val(),
        img: $img.val(),
        from: $from.val(),
        to: $to.val(),
        through: $through.val(),
        startTime: $startTime.val(),
        endTime: $endTime.val(),
        interval: $interval.val()
      },
      (res) => {
        if (res.code <= 0) {
          alert(res.msg);
          if (res.code === 0) {
            window.location.reload();
          } else if (res.code === -2) {
            window.location.href = "login";
          }
        } else {
          alert("奇怪的錯誤，請聯繫管理員\n" + res.msg + "\nError Code:" + res.code);
        }
      }
    );
  }

</script>
<% } %>